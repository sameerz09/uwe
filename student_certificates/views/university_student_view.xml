<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit university.student form view to add certificate fields and send button -->
    <record id="view_university_student_form_inherit_certificate" model="ir.ui.view">
        <field name="name">university.student.form.inherit.certificate</field>
        <field name="model">university.student</field>
        <field name="inherit_id" ref="education_university_management.university_student_view_form"/>
        <field name="arch" type="xml">
            <!-- Add full name fields in header after student number -->
            <xpath expr="//group[field[@name='student_no']]" position="inside">
                <field name="full_name_english" placeholder="Enter full name in English"/>
                <field name="full_name_arabic" placeholder="Enter full name in Arabic"/>
            </xpath>

            <!-- Add certificate fields as a new page/tab -->
            <xpath expr="//notebook" position="inside">
                <page string="Certificate Information" name="certificate_info">
                    <group string="Certificate Details">
                        <group>
                            <field name="passport_number"/>
                            <field name="visa_number"/>
                            <field name="emirati_id_number"/>
                            <field name="english_level_exam"/>
                        </group>
                        <group>
                            <field name="program_name"/>
                            <field name="academic_year"/>
                            <field name="license_number"/>
                        </group>
                    </group>
                    <group string="Letters">
                        <group>
                            <field name="letter_to_students" placeholder="Enter letter content for students..."/>
                            <field name="letter_to_students_attachment" filename="letter_to_students_filename"/>
                        </group>
                        <group>
                            <field name="letter_to_employees" placeholder="Enter letter content for employees..."/>
                            <field name="letter_to_employees_attachment" filename="letter_to_employees_filename"/>
                        </group>
                    </group>
                    <group string="Document Attachments">
                        <group>
                            <field name="high_school_certificate_attachment" filename="high_school_certificate_filename"/>
                            <field name="passport_attachment" filename="passport_filename"/>
                            <field name="visa_attachment" filename="visa_filename"/>
                        </group>
                        <group>
                            <field name="english_level_exam_attachment" filename="english_level_exam_filename"/>
                        </group>
                    </group>
                    <group string="Certificate Template">
                        <field name="certificate_template" widget="radio" options="{'horizontal': true}"/>
                        <field name="custom_certificate_message" 
                               invisible="certificate_template != 'custom'"
                               required="certificate_template == 'custom'"
                               placeholder="Enter your custom certificate message here..."/>
                    </group>
                </page>
            </xpath>

            <!-- Add Send Certificate and Print Certificate buttons in button_box -->
            <xpath expr="//div[@class='oe_button_box' and @name='button_box']" position="inside">
                <button name="%(student_certificates.action_certificate_wizard)d" 
                        string="Certificate" 
                        type="action" 
                        class="oe_stat_button"
                        icon="fa-certificate"
                        context="{'default_student_id': active_id}"/>
            </xpath>
        </field>
    </record>
</odoo>

