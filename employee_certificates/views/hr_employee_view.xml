<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit hr.employee form view to add certificate fields and send button -->
    <record id="view_employee_form_inherit_certificate" model="ir.ui.view">
        <field name="name">hr.employee.form.inherit.certificate</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <!-- Add certificate fields as a new page/tab -->
            <xpath expr="//notebook" position="inside">
                <page string="Certificate Information" name="certificate_info">
                    <group string="Full Names">
                        <group>
                            <field name="full_name_english" placeholder="Enter full name in English"/>
                            <field name="full_name_arabic" placeholder="Enter full name in Arabic"/>
                        </group>
                    </group>
                    <group string="Certificate Details">
                        <group>
                            <field name="passport_number"/>
                            <field name="visa_number"/>
                            <field name="emirati_id_number"/>
                            <field name="english_level_exam"/>
                        </group>
                        <group>
                            <field name="program_name"/>
                            <field name="academic_year"/>
                            <field name="license_number"/>
                        </group>
                    </group>
                    <group string="Letters">
                        <group>
                            <field name="letter_to_students" placeholder="Enter letter content for students..."/>
                            <field name="letter_to_students_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                        </group>
                        <group>
                            <field name="letter_to_employees" placeholder="Enter letter content for employees..."/>
                            <field name="letter_to_employees_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                        </group>
                    </group>
                    <group string="Document Attachments">
                        <group>
                            <field name="passport_or_id_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                            <field name="cv_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                            <field name="photo_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                        </group>
                        <group>
                            <field name="visa_uae_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                            <field name="degree_attachment_ids" widget="many2many_binary" class="oe_inline"/>
                        </group>
                    </group>
                    <group string="Certificate Template">
                        <field name="certificate_template" widget="radio" options="{'horizontal': true}"/>
                        <field name="custom_certificate_message" 
                               invisible="certificate_template != 'custom'"
                               required="certificate_template == 'custom'"
                               placeholder="Enter your custom certificate message here..."/>
                    </group>
                </page>
            </xpath>

            <!-- Add Certificate button in button_box -->
            <xpath expr="//div[@class='oe_button_box' and @name='button_box']" position="inside">
                <button name="%(employee_certificates.action_employee_certificate_wizard)d" 
                        string="Certificate" 
                        type="action" 
                        class="oe_stat_button"
                        icon="fa-certificate"
                        context="{'default_employee_id': active_id}"/>
            </xpath>
        </field>
    </record>
</odoo>

